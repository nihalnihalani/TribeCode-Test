#!/usr/bin/env python3
import os
import sys
import subprocess
import time

BANNER = """
â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•— â–ˆâ–ˆâ•—â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•— â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—
â•šâ•â•â–ˆâ–ˆâ•”â•â•â•â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•—â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•—â–ˆâ–ˆâ•”â•â•â•â•â•
   â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•”â•â–ˆâ–ˆâ•‘â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•”â•â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—
   â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•—â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•—â–ˆâ–ˆâ•”â•â•â•
   â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘  â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•”â•â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—
   â•šâ•â•   â•šâ•â•  â•šâ•â•â•šâ•â•â•šâ•â•â•â•â•â• â•šâ•â•â•â•â•â•â•

  â€¢ Traces agent actions in folders you choose
  â€¢ Automatically scrubs private data
  â€¢ Gives live insights based on your usage to help you learn new skills
  â€¢ We read the docs so you don't have to!
"""

def print_banner():
    print(BANNER)
    print("\nâœ… Ready! VibeBot (TribeCode) is active.\n")

def run_server():
    print("ðŸš€ Starting VibeBot Dashboard...")
    try:
        # check if uvicorn is installed
        subprocess.run(["uvicorn", "--version"], check=True, capture_output=True)
        subprocess.run(["uvicorn", "src.web.app:app", "--reload"])
    except FileNotFoundError:
        print("âŒ Error: uvicorn not found. Please install dependencies first:")
        print("   pip install -r requirements.txt")
    except KeyboardInterrupt:
        print("\nðŸ›‘ Server stopped.")

def main():
    print_banner()
    
    if len(sys.argv) > 1:
        command = sys.argv[1]
        if command == "start":
            run_server()
        elif command == "help":
            print("Available commands:")
            print("  start  - Start the web server")
            print("  help   - Show this help message")
        else:
            print(f"Unknown command: {command}")
            print("Type './tribe start' to launch the app.")
    else:
        # Default action if no args provided, similar to "Type tribe to get started"
        print("Welcome to TribeCode-Test CLI.")
        print("To start the dashboard, run: ./tribe start")

if __name__ == "__main__":
    main()

